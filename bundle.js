!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function a(e,t){var n=e.createBuffer(1,2,e.sampleRate),a=n.getChannelData(0);a[0]=t,a[1]=t;var i=e.createBufferSource();return i.buffer=n,i.loop=!0,i.start(),i}function i(){y=d.currentTime+.01,A=0,b.start(function(e){for(;y<e.end;)_.gate(!0,y),_.gate(!1,y+T*E),y+=E,A++})}function r(){b.stop()}function o(){var e=parseFloat(L.value);e>0&&(E=e)}function s(){var e=parseFloat(N.value);e>0&&e<100&&(T=.01*e)}function u(e){var t=document.createElement("div");t.className="setting-wrapper";var n,a=document.createElement("label");if(e.options){n=document.createElement("select");for(var i=0;i<e.options.length;i++){var r=e.options[i],o=document.createElement("option");o.value=r[0],o.textContent=r[1],n.appendChild(o)}}else n=document.createElement("input"),n.type="number",n.step="any",e.hasOwnProperty("min")&&(n.min=e.min),e.hasOwnProperty("max")&&(n.max=e.max);n.value=_[e.name],n.addEventListener("input",function(){e.options?_[e.name]=n.value:_[e.name]=parseFloat(n.value)}),a.appendChild(document.createTextNode(e.name+" ")),a.appendChild(n),t.appendChild(a),x.appendChild(t)}var c=n(1),l=n(12),h=n(13),d=new(window.AudioContext||window.webkitAudioContext),p=d.createOscillator();p.frequency.value=440,p.type="sine",p.start();var m=d.createGain();m.gain.value=0;var f=a(d,1),g=d.createGain();g.gain.value=0;var v=l(d,document.querySelector("#env-graph"),1024);p.connect(m),m.connect(d.destination),f.connect(g);var _=new c(d,g.gain);g.connect(v),v.connect(m.gain);var S=document.querySelector("#gate-button");S.addEventListener("mousedown",function(e){e.preventDefault(),_.gateOn()}),S.addEventListener("mouseup",function(e){e.preventDefault(),_.gateOff()}),document.querySelector("#gate-on-button").addEventListener("click",function(e){e.preventDefault(),_.gateOn()}),document.querySelector("#gate-off-button").addEventListener("click",function(e){e.preventDefault(),_.gateOff()});var y,A,E,T,b=new h(d);document.querySelector("#auto-gate-enable").addEventListener("change",function(e){e.target.checked?i():r()});var L=document.querySelector("#auto-gate-spacing");o(),L.addEventListener("input",o);var N=document.querySelector("#auto-gate-duty");s(),N.addEventListener("input",s);for(var R=[{name:"mode",options:[["AD","AD"],["ASR","ASR"],["ADSR","ADSR"]]},{name:"attackShape",options:[[_.LINEAR,"linear"]]},{name:"attackRate",min:0},{name:"attackLevel"},{name:"decayShape",options:[[_.LINEAR,"linear"],[_.EXPONENTIAL,"exponential"]]},{name:"decayRate",min:0},{name:"sustainFraction",min:0,max:1},{name:"releaseShape",options:[[_.LINEAR,"linear"],[_.EXPONENTIAL,"exponential"]]},{name:"releaseRate",min:0}],x=document.querySelector("#settings"),O=0;O<R.length;O++)u(R[O])},function(e,t,n){"use strict";function a(e){if(!e)throw new Error("Assertion error")}function i(e,t){if(!(this instanceof i))return new i(e,t);this._audioContext=e,this._targetParam=t;var n=this;Object.defineProperty(this,"mode",{get:function(){return n._mode},set:function(t){n.MODES.indexOf(t)>=0&&(n.gate(!1,r(Math.max(this._lastGateTime,e.currentTime),1/0)),n._mode=t)}}),Object.defineProperty(this,"attackShape",{get:function(){return n._attackShape},set:function(e){n.ATTACK_SHAPES.indexOf(e)>=0&&(n._attackShape=e)}}),Object.defineProperty(this,"attackRate",{get:function(){return n._attackRate},set:function(e){"number"==typeof e&&!isNaN(e)&&e>0&&(n._attackRate=e)}}),Object.defineProperty(this,"attackLevel",{get:function(){return n._attackLevel},set:function(e){"number"!=typeof e||isNaN(e)||(n._attackLevel=e)}}),Object.defineProperty(this,"decayShape",{get:function(){return n._decayShape},set:function(e){n.DECAY_SHAPES.indexOf(e)>=0&&(n._decayShape=e)}}),Object.defineProperty(this,"decayRate",{get:function(){return n._decayRate},set:function(e){"number"==typeof e&&!isNaN(e)&&e>0&&(n._decayRate=e)}}),Object.defineProperty(this,"sustainFraction",{get:function(){return n._sustainFraction},set:function(e){"number"==typeof e&&!isNaN(e)&&e>=0&&e<=1&&(n._sustainFraction=e)}}),Object.defineProperty(this,"releaseShape",{get:function(){return n._releaseShape},set:function(e){n.RELEASE_SHAPES.indexOf(e)>=0&&(n._releaseShape=e)}}),Object.defineProperty(this,"releaseRate",{get:function(){return n._releaseRate},set:function(e){"number"==typeof e&&!isNaN(e)&&e>0&&(n._releaseRate=e)}}),this._mode="ADSR",this._attackShape=this.LINEAR,this._attackRate=2,this._attackLevel=1,this._decayShape=this.EXPONENTIAL,this._decayRate=1,this._sustainFraction=.5,this._releaseShape=this.EXPONENTIAL,this._releaseRate=1,this._targetParam.value=o,this._scheduledSegments=[],this._lastGateTime=e.currentTime,this._lastGateState=!1}var r=n(2),o=0;i.prototype.MODES=["AD","ASR","ADSR"],i.prototype.LINEAR="L",i.prototype.EXPONENTIAL="E",i.prototype.ATTACK_SHAPES=[i.prototype.LINEAR],i.prototype.DECAY_SHAPES=[i.prototype.LINEAR,i.prototype.EXPONENTIAL],i.prototype.RELEASE_SHAPES=[i.prototype.LINEAR,i.prototype.EXPONENTIAL],i.prototype._interruptScheduledSegments=function(e){var t;if(this._scheduledSegments.length){a(e>=this._scheduledSegments[0].beginTime);for(var n,i=0;i<this._scheduledSegments.length;i++){var o=this._scheduledSegments[i];if(e>=o.beginTime&&e<o.endTime){n=i;break}}if(void 0===n){var s=this._scheduledSegments[this._scheduledSegments.length-1];a(e>=s.endTime),t=s.endValue,this._targetParam.setValueAtTime(t,e)}else{var u=this._scheduledSegments[n];u.shape===this.LINEAR?(a(u.endTime!==1/0),t=u.beginValue+(e-u.beginTime)/(u.endTime-u.beginTime)*(u.endValue-u.beginValue),this._targetParam.linearRampToValueAtTime(t,e)):u.shape===this.EXPONENTIAL?(t=u.endValue+(u.beginValue-u.endValue)*Math.exp(u.rate*(u.beginTime-e)),this._targetParam.setValueAtTime(t,e)):a(!1)}}else t=0,this._targetParam.setValueAtTime(t,e);a(void 0!==t),this._targetParam.cancelScheduledValues(r(e,1/0)),this._scheduledSegments=[{beginTime:e,endTime:e,beginValue:t,endValue:t,shape:this.LINEAR}]},i.prototype._scheduleSegment=function(e,t,n){a(this._scheduledSegments.length>0);var i=this._scheduledSegments[this._scheduledSegments.length-1];if(a(i.endTime!==1/0),i.endValue!==e){var r;if(n===1/0)r=i.endTime,this._targetParam.setValueAtTime(e,r);else switch(t){case this.LINEAR:r=i.endTime+Math.abs((e-i.endValue)/n),this._targetParam.linearRampToValueAtTime(e,r);break;case this.EXPONENTIAL:r=1/0,this._targetParam.setTargetAtTime(e,i.endTime,1/n);break;default:a(!1)}this._scheduledSegments.push({shape:t,beginTime:i.endTime,endTime:r,beginValue:i.endValue,endValue:e,rate:n})}},i.prototype.gate=function(e,t){var n=this._audioContext.currentTime;if(t=void 0===t?n:t,t<this._lastGateTime)return void console.warn("Received gate with time earlier than a previous gate");if(this._lastGateTime=t,this._lastGateState=e,"AD"!==this._mode||e)if(this._interruptScheduledSegments(t),e){if(this._scheduleSegment(this._attackLevel,this._attackShape,this._attackRate),"AD"===this._mode||"ADSR"===this._mode){var a;a="AD"===this._mode?o:this._sustainFraction*this._attackLevel,this._scheduleSegment(a,this._decayShape,this._decayRate)}}else this._scheduleSegment(o,this._releaseShape,this._releaseRate)},i.prototype.gateOn=function(e){this.gate(!0,e)},i.prototype.gateOff=function(e){this.gate(!1,e)},e.exports=i},function(e,t,n){"use strict";function a(e,t){var n,a,l,h;return e!==e||t!==t?NaN:e===t?t:0===e?(e=t<0?-o:o,t=e*e,e):(n=i(e),a=n[0],l=n[1],t>e==e>0?l===s?(a+=1,l=0):l+=1:0===l?(a-=1,l=s):l-=1,h=a&u,h===u?e+e:(h<c&&(t=e*e),r(a,l)))}var i=n(3),r=n(7),o=n(9).DENORMALIZED,s=n(11),u=2146435072,c=1048576;e.exports=a},function(e,t,n){"use strict";function a(e){return r[0]=e,[o[s],o[u]]}var i=n(4),r=new Float64Array(1),o=new Uint32Array(r.buffer),s=i.HIGH,u=i.LOW;e.exports=a},function(e,t,n){"use strict";var a,i,r=n(5);r?(a=1,i=0):(a=0,i=1),e.exports={HIGH:a,LOW:i}},function(e,t,n){"use strict";function a(){var e,t;return e=new i.uint16(1),e[0]=4660,t=new i.uint8(e.buffer),52===t[0]}var i=n(6);e.exports=a()},function(e,t){"use strict";var n={uint16:Uint16Array,uint8:Uint8Array};e.exports=n},function(e,t,n){"use strict";function a(e,t){return o[s]=e,o[u]=t,r[0]}var i=n(8),r=new Float64Array(1),o=new Uint32Array(r.buffer),s=i.HIGH,u=i.LOW;e.exports=a},function(e,t,n){"use strict";var a,i,r=n(5);r===!0?(a=1,i=0):(a=0,i=1),e.exports={HIGH:a,LOW:i}},function(e,t,n){"use strict";var a=n(10),i={};a(i,"VALUE",2.2250738585072014e-308),a(i,"DENORMALIZED",5e-324),e.exports=i},function(e,t){"use strict";function n(e,t,n){Object.defineProperty(e,t,{value:n,configurable:!1,writable:!1,enumerable:!0})}e.exports=n},function(e,t){"use strict";e.exports=4294967295},function(e,t){function n(e,t,n){function a(e,n){p.lineWidth=1,p.strokeStyle=n,p.beginPath();for(var a=0;a<r;a++){var i=l+a;i>=r&&(i-=r);var u=t.height*(1-(e[i]-o)/(s-o));0===a?p.moveTo(a,u):p.lineTo(a,u)}p.stroke()}function i(){p.fillStyle="rgb(0, 0, 0)",p.fillRect(0,0,t.width,t.height);var e=t.height*(1+o/(s-o));p.strokeStyle="rgb(0, 0, 255)",p.beginPath(),p.moveTo(0,e),p.lineTo(t.width,e),p.stroke(),a(u,"rgb(100, 255, 0)"),a(c,"rgb(0, 255, 100)"),d=requestAnimationFrame(i)}var r=t.width,o=-1,s=1,u=new Float32Array(r),c=new Float32Array(r),l=0,h=e.createScriptProcessor(n,1,1);h.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0),n=e.outputBuffer.getChannelData(0),a=Math.min.apply(null,t),i=Math.max.apply(null,t);u[l]=a,c[l]=i,l++,l===r&&(l=0);for(var o=0;o<t.length;o++)n[o]=t[o]};var d,p=t.getContext("2d");return i(),h}e.exports=n},function(e,t){function n(e){this.audioContext=e,this.running=!1,this.timeoutID=null}n.prototype.start=function(e){var t=.05,n=.1,a=this,i=null,r=null,o=function(){if(!a.running)throw new Error("Internal error: timeoutFunc called but scheduler not running");var s=a.audioContext.currentTime;null===i&&(i=s,r=s),r<s&&console.log("FELL BEHIND BY",s-r);var u=s+n;e({begin:r,end:u,relativeBegin:r-i,relativeEnd:u-i,start:i}),r=u,a.timeoutID=setTimeout(o,1e3*t)};this.running=!0,o()},n.prototype.stop=function(){this.running=!1,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)},e.exports=n}]);